import React, { useState, useEffect, createContext, useContext, useCallback } from 'react';
import { initializeApp } from 'firebase/app';
import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from 'firebase/auth';
import { getFirestore, doc, getDoc, setDoc, collection, getDocs, writeBatch, query } from 'firebase/firestore';
import { Search, ShoppingCart, User, X, Trash2, PlusCircle, MinusCircle, ArrowLeft, Star, Tag, ExternalLink, Menu, Sparkles, Loader2, Info, CheckCircle, MessageSquare, Percent, Eye, DollarSign, Building, Mail, PhoneIcon as PhoneContactIcon, Zap, ArrowRight, Shield, HelpCircle, ChevronDown, ChevronUp } from 'lucide-react';

// ุฅุนุฏุงุฏุงุช Firebase (ูุฌุจ ุงุณุชุจุฏุงู ูุฐู ุงูููู ุจูุนูููุงุช ูุดุฑูุน Firebase ุงูุฎุงุต ุจู ุงููุนููุฉ)
const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
  apiKey: "YOUR_API_KEY_HERE",
  authDomain: "YOUR_AUTH_DOMAIN_HERE",
  projectId: "YOUR_PROJECT_ID_HERE",
  storageBucket: "YOUR_STORAGE_BUCKET_HERE",
  messagingSenderId: "YOUR_MESSAGING_SENDER_ID_HERE",
  appId: "YOUR_APP_ID_HERE"
};

// ูุนุฑู ุงูุชุทุจูู
const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-digital-store-ar-polished';

// ุชููุฆุฉ Firebase
const firebaseApp = initializeApp(firebaseConfig);
const auth = getAuth(firebaseApp);
const db = getFirestore(firebaseApp);

// ุจูุงูุงุช ุงูููุชุฌุงุช ุงูุฃูููุฉ (ููููู ุชุนุฏูู ูุฐู ุงูููุชุฌุงุช ูุจุงุดุฑุฉ ููุง)
// ูุชุบููุฑ ุตูุฑุฉ ุงูููุชุฌุ ูู ุจุชุนุฏูู ูููุฉ ุญูู 'imageUrl' ุจุงูุฑุงุจุท ุงููุจุงุดุฑ ูุตูุฑุชู.
const initialProductsData = [
  { 
    id: "prod_ar_01", 
    name: "ูุฌููุนุฉ ุฃููููุงุช ููุงุช ุนุตุฑูุฉ (ุนุฑุถ ุฎุงุต!)", 
    price: 9.99, 
    originalPrice: 15.99, 
    imageUrl: "https://placehold.co/400x300/6366f1/e0e7ff?text=ุฃููููุงุช+ููุงุช+ุนุฑุถ", // <-- ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ ุงูุฃูู: ูู ุจุชุบููุฑู ููุง
    description: "ุฃูุซุฑ ูู 500 ุฃููููุฉ ูููุชูุฑ ูุณุทุญุฉ (Flat Design) ุนุงููุฉ ุงูุฌูุฏุฉุ ูุซุงููุฉ ูุชุทุจููุงุช ุงูููุจ ูุงูููุงุชู ุงูุฐููุฉ. ุชุดูู ูููุงุช SVG ู PNG. ุงุญุตู ุนูููุง ุงูุขู ุจุณุนุฑ ูุฎูุถ! ูุฐู ุงูุฃููููุงุช ุชุชููุฒ ุจุชุตููููุง ุงููุธูู ูุงูุจุณูุทุ ููุง ูุฌุนููุง ููุงุณุจุฉ ููุฎุชูู ุฃููุงุน ุงููุดุงุฑูุน ุงูุฑูููุฉ ุงูุญุฏูุซุฉ. ุณููุฉ ุงูุชุนุฏูู ูุงูุชุฎุตูุต ูุชูุงุณุจ ูููุฉ ุนูุงูุชู ุงูุชุฌุงุฑูุฉ.", 
    category: "ุฃุตูู ุชุตููู", 
    tags: ["ุฃููููุงุช", "ูููุชูุฑ", "ุชุตููู ูุณุทุญ", "ูุงุฌูุฉ ูุณุชุฎุฏู", "ุนุฑุถ"], 
    rating: 4.9,
    onSale: true 
  },
  { 
    id: "prod_ar_02", 
    name: "ุฏูุฑุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงูููุจ ุงูุดุงููุฉ (Full-Stack)", 
    price: 120.00, 
    imageUrl: "https://placehold.co/400x300/ec4899/fbcfe8?text=ุฏูุฑุฉ+ุจุฑูุฌุฉ+ููุจ", // <-- ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ ุงูุซุงูู: ูู ุจุชุบููุฑู ููุง
    description: "ุชุนูู ุจูุงุก ุชุทุจููุงุช ููุจ ูุชูุงููุฉ ูู ุงูุตูุฑ ุจุงุณุชุฎุฏุงู ุฃุญุฏุซ ุงูุชูููุงุช ูุซู Reactุ Node.jsุ ู MongoDB. ุชุชุถูู ูุดุงุฑูุน ุนูููุฉ ูุฏุนููุง ูุณุชูุฑูุง ูู ูุฏุฑุจูู ุฎุจุฑุงุก. ุงูุฏูุฑุฉ ูุตููุฉ ูุชุฃุฎุฐู ูู ูุณุชูู ุงููุจุชุฏุฆ ุฅูู ูุณุชูู ูุชูุฏู ููููู ูู ุฎูุงูู ุจูุงุก ุชุทุจููุงุช ููุจ ูููุฉ ููุงุจูุฉ ููุชุทููุฑ.", 
    category: "ุฏูุฑุงุช ุชุฏุฑูุจูุฉ", 
    tags: ["ุจุฑูุฌุฉ", "ุชุทููุฑ ููุจ", "React", "Node.js", "Full-Stack"], 
    rating: 4.7 
  },
  { 
    id: "prod_ar_03", 
    name: "ูุงูุจ ุจูุฑุจูููุช ุงุญุชุฑุงูู (ุฎุตู 30%)", 
    price: 15.75, 
    originalPrice: 22.50,
    imageUrl: "https://placehold.co/400x300/f59e0b/fef3c7?text=ูุงูุจ+ุจูุฑุจูููุช+ุฎุตู", // <-- ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ ุงูุซุงูุซ: ูู ุจุชุบููุฑู ููุง
    description: "ูุฌููุนุฉ ูู 50 ุดุฑูุญุฉ ุจูุฑุจูููุช ูุตููุฉ ุจุดูู ุงุญุชุฑุงูู ูุฌุฐุงุจุ ูุงุจูุฉ ููุชุนุฏูู ุจุงููุงูู. ูุซุงููุฉ ูุนุฑูุถ ุงูุดุฑูุงุช ูุงูุชูุงุฑูุฑ ูุงููุดุงุฑูุน. ุงุณุชูุฏ ูู ุงูุฎุตู ุงูุขู! ูุชููุฒ ุงููุงูุจ ุจุชุตุงููู ูุชููุนุฉ ุชูุงุณุจ ูุฎุชูู ุงููุฌุงูุงุชุ ูุน ุฑุณูู ุจูุงููุฉ ูุฌุฏุงูู ูุฃุดูุงู ูุงุจูุฉ ููุชุฎุตูุต ุจุณูููุฉ.", 
    category: "ููุงูุจ ุนุฑูุถ ุชูุฏูููุฉ", 
    tags: ["ุจูุฑุจูููุช", "ุนุฑูุถ ุชูุฏูููุฉ", "ุฃุนูุงู", "ููุงูุจ", "ุชุฎููุถ"], 
    rating: 4.6,
    onSale: true
  },
  { 
    id: "prod_ar_04", 
    name: "ูุชุงุจ ุฅููุชุฑููู: ุฃุณุฑุงุฑ ุงูุชุณููู ุจุงููุญุชูู ุงููุนุงู", 
    price: 9.99, 
    imageUrl: "https://placehold.co/400x300/10b981/a7f3d0?text=ูุชุงุจ+ุชุณููู+ูุญุชูู", // <-- ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ ุงูุฑุงุจุน: ูู ุจุชุบููุฑู ููุง
    description: "ุฏููู ุดุงูู ูุงุณุชุฑุงุชูุฌูุงุช ุงูุชุณููู ุจุงููุญุชูู ุงูุชู ุชุญูู ูุชุงุฆุฌ. ุชุนูู ููู ุชูุดุฆ ูุญุชูู ูุฌุฐุจ ุฌูููุฑู ุงููุณุชูุฏู ููุญูููู ุฅูู ุนููุงุก. ูุบุทู ุงููุชุงุจ ููููุฉ ุชุญุฏูุฏ ุงูุฌูููุฑุ ูุฅูุดุงุก ุฃููุงุน ูุฎุชููุฉ ูู ุงููุญุชููุ ูุชูุฒูุนูุ ูููุงุณ ุฃุฏุงุฆู.", 
    category: "ูุชุจ ุฅููุชุฑูููุฉ", 
    tags: ["ุชุณููู ุจุงููุญุชูู", "ูุชุงุจ ุฅููุชุฑููู", "ุงุณุชุฑุงุชูุฌูุงุช ุชุณููู"], 
    rating: 4.8 
  },
  { 
    id: "prod_ar_05", 
    name: "ุญุฒูุฉ ูุคุซุฑุงุช ุตูุชูุฉ ุณูููุงุฆูุฉ (SFX) - ุงูุฃูุถู ูุจูุนูุง", 
    price: 35.00, 
    imageUrl: "https://placehold.co/400x300/8b5cf6/ede9fe?text=ูุคุซุฑุงุช+ุตูุชูุฉ+SFX", // <-- ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ ุงูุฎุงูุณ: ูู ุจุชุบููุฑู ููุง
    description: "ููุชุจุฉ ุถุฎูุฉ ูู ุงููุคุซุฑุงุช ุงูุตูุชูุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูููููุชุงุฌ ุงูุณูููุงุฆู ูุตูุงุนุฉ ุงูุฃููุงู ูุงูุฃูุนุงุจ. ุชุดูู ุฃุตูุงุช ุงููุฌุงุฑุงุชุ ุงูุชูุงูุงุชุ ุฃุฌูุงุกุ ูุบูุฑูุง ุงููุซูุฑ. ุฌููุน ุงููุคุซุฑุงุช ูุณุฌูุฉ ุจุฌูุฏุฉ ุงุญุชุฑุงููุฉ ูุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ุงูููุฑู ูู ูุดุงุฑูุนู.", 
    category: "ุฃุตูู ุตูุชูุฉ", 
    tags: ["ูุคุซุฑุงุช ุตูุชูุฉ", "SFX", "ูููุชุงุฌ", "ุฃูุนุงุจ", "ุณูููุง"], 
    rating: 4.9 
  },
  { 
    id: "prod_ar_06", 
    name: "ุจุฑูุงูุฌ ุฅุฏุงุฑุฉ ุงูููุงู ูุงูุฅูุชุงุฌูุฉ (ุชูููุฑ ูุจูุฑ!)", 
    price: 19.99, 
    originalPrice: 29.99,
    imageUrl: "https://placehold.co/400x300/3b82f6/dbeafe?text=ุจุฑูุงูุฌ+ุฅุฏุงุฑุฉ+ููุงู+ุชูููุฑ", // <-- ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ ุงูุณุงุฏุณ: ูู ุจุชุบููุฑู ููุง
    description: "ุฃุฏุงุฉ ูููุฉ ูุชูุธูู ููุงูู ููุดุงุฑูุนู ูุฒูุงุฏุฉ ุฅูุชุงุฌูุชู. ูุชููุฒ ุจูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู ูููุฒุงุช ูุชูุฏูุฉ ูุซู ุชุชุจุน ุงูููุชุ ูุงูุชุนุงูู ุงูุฌูุงุนูุ ูุชูุงุฑูุฑ ุงูุฃุฏุงุก. ุนุฑุถ ูุญุฏูุฏ ูุง ุชููุชู!", 
    category: "ุจุฑุงูุฌ ุฅูุชุงุฌูุฉ", 
    tags: ["ุฅูุชุงุฌูุฉ", "ุฅุฏุงุฑุฉ ููุงู", "ุชูุธูู", "ุจุฑุงูุฌ ููุชุจูุฉ", "ุนุฑุถ ุฎุงุต"], 
    rating: 4.5,
    onSale: true
  }
];

const seedProducts = async () => {
  const productsCollectionRef = collection(db, `/artifacts/${appId}/public/data/products_ar`);
  const q = query(productsCollectionRef);
  const snapshot = await getDocs(q);
  if (snapshot.empty) {
    console.log("ูุฌููุนุฉ ุงูููุชุฌุงุช ูุงุฑุบุฉ. ุฌุงุฑู ุฅุถุงูุฉ ุงูููุชุฌุงุช ุงูุฃูููุฉ...");
    const batch = writeBatch(db);
    initialProductsData.forEach(product => {
      const docRef = doc(productsCollectionRef, product.id); 
      batch.set(docRef, product);
    });
    await batch.commit();
    console.log("ุชูุช ุฅุถุงูุฉ ุงูููุชุฌุงุช ุงูุฃูููุฉ.");
  } else {
    console.log("ูุฌููุนุฉ ุงูููุชุฌุงุช ุชุญุชูู ุจุงููุนู ุนูู ุจูุงูุงุช.");
  }
};

const CartContext = createContext();
export const CartProvider = ({ children }) => {
  const [cart, setCart] = useState({ items: [], totalAmount: 0, totalItems: 0 });
  const [userId, setUserId] = useState(null);
  const [isCartLoading, setIsCartLoading] = useState(true);

  useEffect(() => {
    const unsubscribeAuth = onAuthStateChanged(auth, async (user) => {
      if (user) {
        setUserId(user.uid);
        const cartDocRef = doc(db, `/artifacts/${appId}/users/${user.uid}/cart/userCart_ar`);
        const unsubscribeCart = onSnapshot(cartDocRef, async (docSnap) => { 
          if (docSnap.exists()) { setCart(docSnap.data()); } 
          else { const newCart = { items: [], totalAmount: 0, totalItems: 0 }; setCart(newCart); await setDoc(cartDocRef, newCart); }
          setIsCartLoading(false);
        }, (error) => { console.error("ุฎุทุฃ ูู ุฌูุจ ุงูุณูุฉ ูู Firestore:", error); setIsCartLoading(false); });
        return () => unsubscribeCart();
      } else { setUserId(null); setCart({ items: [], totalAmount: 0, totalItems: 0 }); setIsCartLoading(false); }
    });
    return () => unsubscribeAuth();
  }, []);

  const updateFirestoreCart = useCallback(async (newCart) => {
    if (userId) {
      const cartDocRef = doc(db, `/artifacts/${appId}/users/${userId}/cart/userCart_ar`);
      try { await setDoc(cartDocRef, newCart); } 
      catch (error) { console.error("ุฎุทุฃ ูู ุชุญุฏูุซ ุณูุฉ Firestore:", error); }
    }
  }, [userId]);

  const calculateCartTotals = (items) => {
    const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);
    const totalAmount = items.reduce((sum, item) => sum + item.price * item.quantity, 0);
    return { items, totalAmount: parseFloat(totalAmount.toFixed(2)), totalItems };
  };

  const addToCart = (product, quantity = 1) => {
    setCart(prevCart => {
      const existingItemIndex = prevCart.items.findIndex(item => item.id === product.id);
      let updatedItems;
      if (existingItemIndex > -1) {
        updatedItems = prevCart.items.map((item, index) => index === existingItemIndex ? { ...item, quantity: item.quantity + quantity } : item);
      } else {
        updatedItems = [...prevCart.items, { ...product, quantity }];
      }
      const newCart = calculateCartTotals(updatedItems); updateFirestoreCart(newCart); return newCart;
    });
  };
  const removeFromCart = (productId) => {
    setCart(prevCart => {
      const updatedItems = prevCart.items.filter(item => item.id !== productId);
      const newCart = calculateCartTotals(updatedItems); updateFirestoreCart(newCart); return newCart;
    });
  };
  const updateQuantity = (productId, newQuantity) => {
    if (newQuantity < 1) { removeFromCart(productId); return; }
    setCart(prevCart => {
      const updatedItems = prevCart.items.map(item => item.id === productId ? { ...item, quantity: newQuantity } : item );
      const newCart = calculateCartTotals(updatedItems); updateFirestoreCart(newCart); return newCart;
    });
  };
  const clearCart = () => {
    const newCart = { items: [], totalAmount: 0, totalItems: 0 }; setCart(newCart); updateFirestoreCart(newCart);
  };
  return (<CartContext.Provider value={{ cart, addToCart, removeFromCart, updateQuantity, clearCart, userId, isCartLoading }}>{children}</CartContext.Provider>);
};
export const useCart = () => useContext(CartContext);

const StyledButton = ({ children, onClick, variant = 'primary', className = '', icon: Icon, disabled = false, type = "button", size = "normal" }) => {
  const baseStyle = "font-semibold rounded-lg transition-all duration-300 ease-in-out flex items-center justify-center shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-opacity-50 disabled:opacity-60 disabled:cursor-not-allowed";
  let sizeStyle = "py-2.5 px-6"; 
  if (size === "small") sizeStyle = "py-2 px-4 text-sm";
  if (size === "large") sizeStyle = "py-3.5 px-8 text-lg";

  let variantStyle = '';
  switch (variant) {
    case 'primary': variantStyle = 'bg-sky-500 hover:bg-sky-600 text-white focus:ring-sky-400'; break;
    case 'secondary': variantStyle = 'bg-slate-600 hover:bg-slate-500 text-white focus:ring-slate-400'; break;
    case 'danger': variantStyle = 'bg-red-500 hover:bg-red-600 text-white focus:ring-red-400'; break;
    case 'success': variantStyle = 'bg-green-500 hover:bg-green-600 text-white focus:ring-green-400'; break;
    case 'whatsapp': variantStyle = 'bg-green-500 hover:bg-green-600 text-white focus:ring-green-400'; break; 
    case 'warning': variantStyle = 'bg-yellow-500 hover:bg-yellow-600 text-black focus:ring-yellow-400'; break;
    case 'purple': variantStyle = 'bg-purple-600 hover:bg-purple-700 text-white focus:ring-purple-400'; break;
    case 'teal': variantStyle = 'bg-teal-500 hover:bg-teal-600 text-white focus:ring-teal-400'; break;
    case 'outline-light': variantStyle = 'bg-transparent border-2 border-slate-500 text-slate-300 hover:bg-slate-700 hover:text-white focus:ring-slate-400'; break;
    case 'outline-sky': variantStyle = 'bg-transparent border-2 border-sky-500 text-sky-400 hover:bg-sky-500 hover:text-white focus:ring-sky-400'; break;
    default: variantStyle = 'bg-sky-500 hover:bg-sky-600 text-white focus:ring-sky-400';
  }
  return (<button type={type} onClick={onClick} className={`${baseStyle} ${sizeStyle} ${variantStyle} ${className}`} disabled={disabled}>{Icon && <Icon size={size === "small" ? 16 : 20} className={children ? "me-2" : ""} />} {children}</button>);
};

const Navbar = ({ setCurrentView, setSearchQuery }) => {
  const { cart } = useCart();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const navLinks = [
    { view: 'home', label: 'ุงูุฑุฆูุณูุฉ' },
    { view: 'products', label: 'ุงูููุชุฌุงุช' },
    { view: 'about', label: 'ูู ูุญู' },
    { view: 'faq', label: 'ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ' },
    { view: 'privacy', label: 'ุณูุงุณุฉ ุงูุฎุตูุตูุฉ' },
    { view: 'contact', label: 'ุงุชุตู ุจูุง' },
  ];
  return (
    <nav className="bg-slate-800/80 backdrop-blur-md text-white p-4 sticky top-0 z-50 shadow-lg border-b border-slate-700">
      <div className="container mx-auto flex justify-between items-center">
        <h1 className="text-3xl font-bold text-sky-400 cursor-pointer hover:text-sky-300 transition-colors flex items-center" onClick={() => setCurrentView('home')}>
            <Zap size={28} className="me-2 text-yellow-400 transform -rotate-12"/> ุงููุชุฌุฑ ุงูุฃููู
        </h1>
        <div className="hidden md:flex items-center bg-slate-700 rounded-full p-2 w-2/5 shadow-inner">
          <Search className="text-slate-400 ms-3" size={20} />
          <input type="text" placeholder="ุงุจุญุซ ุนู ุชุญูุชู ุงูุฑูููุฉ..." className="bg-transparent focus:outline-none text-white w-full placeholder-slate-400 px-2" onChange={(e) => setSearchQuery(e.target.value)} />
        </div>
        <div className="hidden md:flex items-center space-x-1 space-x-reverse">
          {navLinks.map(link => (
            <button key={link.view} onClick={() => setCurrentView(link.view)} className="hover:bg-slate-700 transition-colors px-3 py-2 rounded-md text-xs font-medium">{link.label}</button>
          ))}
          <button onClick={() => setCurrentView('cart')} className="relative bg-sky-500 hover:bg-sky-600 transition-colors flex items-center px-4 py-2 rounded-full text-sm font-medium shadow-md">
            <ShoppingCart size={18} className="me-1.5" />
            ุงูุณูุฉ
            {cart.totalItems > 0 && (<span className="absolute -top-1 -right-1 bg-red-500 text-xs rounded-full h-5 w-5 flex items-center justify-center shadow-sm border-2 border-slate-800">{cart.totalItems}</span>)}
          </button>
        </div>
        <div className="md:hidden flex items-center">
            <button onClick={() => setCurrentView('cart')} className="relative hover:text-sky-400 transition-colors ms-4 p-2"><ShoppingCart size={24} />{cart.totalItems > 0 && (<span className="absolute -top-1 -left-1 bg-red-500 text-xs rounded-full h-4 w-4 flex items-center justify-center">{cart.totalItems}</span>)}</button>
            <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="text-white focus:outline-none p-2"><Menu size={28} /></button>
        </div>
      </div>
      {mobileMenuOpen && (
        <div className="md:hidden mt-3 bg-slate-700/90 backdrop-blur-sm rounded-md shadow-xl py-2">
          <div className="p-2 mx-2 mb-2"><input type="text" placeholder="ุงุจุญุซ..." className="bg-slate-600 focus:outline-none text-white w-full p-2 rounded-md" onChange={(e) => setSearchQuery(e.target.value)} /></div>
          {[...navLinks, {view: 'cart', label: 'ุงูุณูุฉ'}].map(item => (
            <button key={item.view} onClick={() => {setCurrentView(item.view); setMobileMenuOpen(false);}} className="block w-full text-right px-4 py-2.5 hover:bg-slate-600 transition-colors">{item.label}</button>
          ))}
        </div>
      )}
    </nav>
  );
};

const PromotionalBanner = ({ products, setCurrentView, setSelectedProduct }) => {
  const saleProducts = products.filter(p => p.onSale && p.originalPrice);
  if (saleProducts.length === 0) return null;
  return (
    <div className="bg-gradient-to-r from-purple-600 via-pink-500 to-red-500 text-white py-3 px-4 shadow-lg">
      <div className="container mx-auto flex items-center justify-center overflow-hidden">
        <Percent size={28} className="me-3 flex-shrink-0 animate-pulse" />
        <div className="marquee-container relative w-full overflow-hidden">
            <div className="marquee-content flex space-x-8 space-x-reverse animate-marquee whitespace-nowrap">
                {saleProducts.map(product => (
                    <div key={product.id} className="flex items-center cursor-pointer hover:opacity-80 transition-opacity" onClick={() => { setSelectedProduct(product); setCurrentView('productDetail'); }}>
                        <img src={product.imageUrl || 'https://placehold.co/50x50/ffffff/333333?text=ุนุฑุถ'} alt={product.name} className="w-10 h-10 object-cover rounded-md me-3 border-2 border-white/50"/>
                        <div> <span className="font-semibold text-sm">{product.name}</span> <div className="flex items-baseline"> <span className="text-lg font-bold me-2">${product.price.toFixed(2)}</span> <span className="text-xs line-through opacity-75">${product.originalPrice.toFixed(2)}</span> </div> </div>
                    </div>
                ))}
                {saleProducts.map(product => (
                    <div key={`${product.id}-clone`} className="flex items-center cursor-pointer hover:opacity-80 transition-opacity" onClick={() => { setSelectedProduct(product); setCurrentView('productDetail'); }}>
                        <img src={product.imageUrl || 'https://placehold.co/50x50/ffffff/333333?text=ุนุฑุถ'} alt={product.name} className="w-10 h-10 object-cover rounded-md me-3 border-2 border-white/50"/>
                        <div> <span className="font-semibold text-sm">{product.name}</span> <div className="flex items-baseline"> <span className="text-lg font-bold me-2">${product.price.toFixed(2)}</span> <span className="text-xs line-through opacity-75">${product.originalPrice.toFixed(2)}</span> </div> </div>
                    </div>
                ))}
            </div>
        </div>
      </div>
    </div>
  );
};

const Hero = ({ setCurrentView }) => (
  <div className="relative text-white py-24 md:py-40 px-4 overflow-hidden bg-slate-900">
    <div className="absolute inset-0 z-0">
      <div className="absolute inset-0 bg-gradient-to-br from-sky-900 via-purple-900 to-slate-900 opacity-70"></div>
      <div className="absolute inset-0 pattern-dots pattern-slate-700 pattern-bg-transparent pattern-opacity-10 pattern-size-6"></div>
    </div>
    <div className="absolute -top-20 -right-20 w-72 h-72 bg-sky-500/20 rounded-full filter blur-3xl opacity-50 animate-pulse-slow"></div>
    <div className="absolute -bottom-20 -left-20 w-72 h-72 bg-purple-500/20 rounded-full filter blur-3xl opacity-50 animate-pulse-slower"></div>
    <div className="container mx-auto text-center relative z-10">
      <h1 className="text-5xl md:text-7xl font-extrabold mb-6 animate-fade-in-down tracking-tight leading-tight">
        <span className="block">ูุชุฌุฑู ุงูุฑููู ุงูุฌุฏูุฏุ</span>
        <span className="block text-sky-400">ุจุฅููุงููุงุช ูุง ูุญุฏูุฏุฉ</span>
      </h1>
      <p className="text-lg md:text-xl text-slate-300 mb-10 animate-fade-in-up delay-200 max-w-2xl mx-auto leading-relaxed">
        ุงูุชุดู ุฅุจุฏุงุนุงุช ุฑูููุฉ ูุฑูุฏุฉุ ูุตููุฉ ูุฅููุงูู ูุชููููู. ูุฏุนูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุชุนุฒูุฒ ุชุฌุฑุจุชู ูุชูุฏูู ุงูุฃูุถู ูู.
      </p>
      <StyledButton 
        onClick={() => setCurrentView('products')} 
        variant="primary" 
        size="large" 
        className="animate-bounce-slow group shadow-sky-500/40 hover:shadow-sky-500/60"
        icon={ArrowRight} 
      >
        <span className="group-hover:tracking-wider transition-all duration-300">ุงุณุชูุดู ุงูุฅุจุฏุงุนุงุช ุงูุขู</span>
      </StyledButton>
    </div>
  </div>
);

const ProductCard = ({ product, setCurrentView, setSelectedProduct }) => {
  const { addToCart } = useCart();
  const handleViewDetails = () => { setSelectedProduct(product); setCurrentView('productDetail'); };
  return (
    <div className="bg-slate-800 rounded-xl shadow-2xl overflow-hidden flex flex-col justify-between transition-all duration-300 ease-in-out hover:shadow-sky-500/30 hover:scale-[1.03] border border-slate-700/50 group">
      <div className="relative overflow-hidden cursor-pointer" onClick={handleViewDetails}>
        <img src={product.imageUrl || 'https://placehold.co/400x300/1a202c/718096?text=ูุง+ุชูุฌุฏ+ุตูุฑุฉ'} alt={product.name} className="w-full h-56 object-cover transition-transform duration-300 group-hover:scale-110" onError={(e) => e.target.src = 'https://placehold.co/400x300/1a202c/718096?text=ุฎุทุฃ+ูู+ุงูุตูุฑุฉ'} />
        {product.category && <span className="absolute top-3 left-3 bg-sky-500/80 text-white text-xs px-2.5 py-1 rounded-full backdrop-blur-sm shadow-sm">{product.category}</span>}
        {product.onSale && product.originalPrice && (
            <div className="absolute top-3 right-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-md shadow-lg transform rotate-3">
                ุนุฑุถ!
            </div>
        )}
      </div>
      <div className="p-5 flex flex-col flex-grow">
        <h3 className="text-xl font-semibold text-sky-300 mb-2 h-14 overflow-hidden cursor-pointer hover:text-sky-200" onClick={handleViewDetails}>{product.name}</h3>
        <div className="flex items-center mb-4">
          {[...Array(5)].map((_, i) => (<Star key={i} size={18} className={i < Math.round(product.rating || 0) ? "text-yellow-400 fill-current" : "text-slate-600"} />))}
          <span className="ms-2 text-sm text-slate-400">({product.rating || 0})</span>
        </div>
        <div className="flex items-baseline mb-4">
            <p className="text-3xl font-bold text-white text-left">${product.price?.toFixed(2) || '0.00'}</p>
            {product.onSale && product.originalPrice && (
                <p className="text-lg text-slate-500 line-through ms-2 text-left">${product.originalPrice.toFixed(2)}</p>
            )}
        </div>
      </div>
      <div className="p-4 border-t border-slate-700 mt-auto grid grid-cols-2 gap-3">
         <StyledButton onClick={handleViewDetails} variant="outline-sky" size="small" icon={Eye}>ุงูุชูุงุตูู</StyledButton>
         <StyledButton onClick={() => addToCart(product)} variant="primary" size="small" icon={DollarSign}>ุดุฑุงุก ุงูุขู</StyledButton>
      </div>
    </div>
  );
};

const ProductList = ({ products, setCurrentView, setSelectedProduct, title = "ุงูููุชุฌุงุช ุงููููุฒุฉ" }) => (
  <div className="container mx-auto py-12 md:py-16 px-4">
    <h2 className="text-3xl md:text-4xl font-bold text-white mb-10 text-center tracking-tight">{title}</h2>
    {products.length === 0 ? (
      <p className="text-slate-400 text-center text-xl py-10">ูุง ุชูุฌุฏ ููุชุฌุงุช ูุนุฑุถูุง ุญุงูููุง.</p>
    ) : (
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
        {products.map(product => ( <ProductCard key={product.id} product={product} setCurrentView={setCurrentView} setSelectedProduct={setSelectedProduct} /> ))}
      </div>
    )}
  </div>
);

const ProductDetailView = ({ product, setCurrentView }) => {
  const { addToCart } = useCart();
  if (!product) return <p className="text-white p-8">ุงูููุชุฌ ุบูุฑ ููุฌูุฏ. <button onClick={() => setCurrentView('home')} className="text-sky-400">ุงูุนูุฏุฉ</button></p>;

  return (
    <div className="container mx-auto py-10 md:py-16 px-4 text-white">
      <StyledButton onClick={() => setCurrentView('products')} variant="secondary" className="mb-8" icon={ArrowLeft}>ุงูุนูุฏุฉ ุฅูู ุงูููุชุฌุงุช</StyledButton>
      <div className="bg-slate-800 rounded-xl shadow-2xl p-6 md:p-10 flex flex-col lg:flex-row gap-8 md:gap-12">
        <div className="lg:w-2/5">
          <img src={product.imageUrl || 'https://placehold.co/600x400/1a202c/718096?text=ูุง+ุชูุฌุฏ+ุตูุฑุฉ'} alt={product.name} className="w-full h-auto max-h-[550px] object-contain rounded-lg shadow-xl mb-4 md:mb-0 border border-slate-700" onError={(e) => e.target.src = 'https://placehold.co/600x400/1a202c/718096?text=ุฎุทุฃ+ูู+ุงูุตูุฑุฉ'} />
        </div>
        <div className="lg:w-3/5 flex flex-col">
          <div>
            {product.category && <span className="text-sm bg-sky-600 text-sky-100 px-3 py-1 rounded-full mb-3 inline-block shadow-sm">{product.category}</span>}
            <h2 className="text-3xl md:text-4xl font-bold text-sky-300 mb-4 tracking-tight">{product.name}</h2>
            <div className="flex items-center mb-5">
              {[...Array(5)].map((_, i) => (<Star key={i} size={22} className={i < Math.round(product.rating || 0) ? "text-yellow-400 fill-current" : "text-slate-600"} />))}
              <span className="ms-3 text-lg text-slate-300">({product.rating || 0} ูุฌูู)</span>
            </div>
            <p className="text-slate-300 text-lg mb-6 leading-relaxed whitespace-pre-wrap">{product.description}</p>
            {product.tags && product.tags.length > 0 && (
              <div className="mb-6 mt-8"><h4 className="text-md font-semibold text-slate-200 mb-2">ุงููุณูู:</h4><div className="flex flex-wrap gap-2">{product.tags.map(tag => (<span key={tag} className="bg-slate-700 text-slate-300 px-3 py-1.5 rounded-full text-sm shadow-sm flex items-center">{tag} <Tag size={14} className="ms-1.5" /></span>))}</div></div>
            )}
          </div>
          <div className="mt-auto pt-6 border-t border-slate-700">
            <div className="flex items-baseline mb-6">
                <p className="text-4xl font-extrabold text-white text-left">${product.price?.toFixed(2) || '0.00'}</p>
                {product.onSale && product.originalPrice && (
                    <p className="text-2xl text-slate-500 line-through ms-3 text-left">${product.originalPrice.toFixed(2)}</p>
                )}
            </div>
            <div className="flex flex-col sm:flex-row gap-4">
              <StyledButton onClick={() => addToCart(product)} variant="primary" size="large" className="flex-grow" icon={ShoppingCart}>ุฃุถู ุฅูู ุงูุณูุฉ</StyledButton>
              {product.demoUrl && product.demoUrl !== "#" && (<StyledButton onClick={() => window.open(product.demoUrl, '_blank')} variant="secondary" size="large" className="flex-grow" icon={ExternalLink}>ุนุฑุถ ุชุฌุฑูุจู</StyledButton>)}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

const CartView = ({ setCurrentView }) => {
  const { cart, removeFromCart, updateQuantity, clearCart, isCartLoading } = useCart();
  if (isCartLoading) return <div className="text-white text-center py-20 text-xl">ุฌุงุฑู ุชุญููู ุงูุณูุฉ...</div>;
  if (cart.items.length === 0) return (
    <div className="container mx-auto py-16 px-4 text-center text-white">
      <ShoppingCart size={72} className="mx-auto mb-8 text-slate-500" />
      <h2 className="text-4xl font-semibold mb-5">ุณูุฉ ุงูุชุณูู ูุงุฑุบุฉ!</h2>
      <p className="text-slate-400 mb-8 text-lg">ูู ุชูู ุจุฅุถุงูุฉ ุฃู ูููุฒ ุฑูููุฉ ุจุนุฏ. ุงุจุฏุฃ ุฑุญูุฉ ุงูุชุณูู ุงูุขู!</p>
      <StyledButton onClick={() => setCurrentView('products')} variant="primary" size="large" icon={Search}>ุชุตูุญ ุงูููุชุฌุงุช</StyledButton>
    </div>
  );
  return (
    <div className="container mx-auto py-10 md:py-16 px-4 text-white">
      <h2 className="text-3xl md:text-4xl font-bold mb-10">ุณูุฉ ุงูุชุณูู ุงูุฎุงุตุฉ ุจู</h2>
      <div className="bg-slate-800 rounded-xl shadow-2xl p-5 md:p-8">
        {cart.items.map(item => (
          <div key={item.id} className="flex flex-col sm:flex-row items-center justify-between py-5 border-b border-slate-700 last:border-b-0 gap-4">
            <div className="flex items-center w-full sm:w-2/5">
              <img src={item.imageUrl || 'https://placehold.co/80x80/1a202c/718096?text=N/A'} alt={item.name} className="w-24 h-24 object-cover rounded-lg ms-4 shadow-md border border-slate-700" onError={(e) => e.target.src = 'https://placehold.co/80x80/1a202c/718096?text=N/A'}/>
              <div>
                <h3 className="text-lg font-semibold text-sky-300 hover:text-sky-200 cursor-pointer" onClick={() => { /* setSelectedProduct(item); setCurrentView('productDetail'); */ }}>{item.name}</h3>
                <p className="text-sm text-slate-400 text-right">${item.price?.toFixed(2)}</p>
              </div>
            </div>
            <div className="flex items-center justify-between w-full sm:w-auto gap-3 sm:gap-5">
              <div className="flex items-center">
                <button onClick={() => updateQuantity(item.id, item.quantity - 1)} className="p-1.5 text-slate-400 hover:text-white transition-colors bg-slate-700 rounded-md hover:bg-slate-600"><MinusCircle size={20}/></button>
                <span className="mx-3 text-lg font-medium w-8 text-center">{item.quantity}</span>
                <button onClick={() => updateQuantity(item.id, item.quantity + 1)} className="p-1.5 text-slate-400 hover:text-white transition-colors bg-slate-700 rounded-md hover:bg-slate-600"><PlusCircle size={20}/></button>
              </div>
              <p className="text-lg font-semibold w-24 text-left">${(item.price * item.quantity).toFixed(2)}</p>
              <StyledButton onClick={() => removeFromCart(item.id)} variant="danger" className="p-2.5" icon={Trash2}/>
            </div>
          </div>
        ))}
        <div className="mt-10 pt-8 border-t border-slate-700">
          <div className="flex justify-between items-center mb-3"><p className="text-xl text-slate-300">ุงููุฌููุน ุงููุฑุนู:</p><p className="text-xl font-semibold text-left">${cart.totalAmount.toFixed(2)}</p></div>
          <div className="flex justify-between items-center mb-8"><p className="text-xl text-slate-300">ุฅุฌูุงูู ุงูููุชุฌุงุช:</p><p className="text-xl font-semibold">{cart.totalItems}</p></div>
          <div className="flex flex-col sm:flex-row justify-between gap-4">
            <StyledButton onClick={clearCart} variant="secondary" size="large">ุฅูุฑุงุบ ุงูุณูุฉ</StyledButton>
            <StyledButton onClick={() => setCurrentView('checkout')} variant="success" size="large">ุงููุชุงุจุนุฉ ุฅูู ุงูุฏูุน</StyledButton>
          </div>
        </div>
      </div>
    </div>
  );
};

const CheckoutView = ({ setCurrentView }) => {
  const { cart, clearCart } = useCart();
  const [isProcessing, setIsProcessing] = useState(false);
  const [submissionMessage, setSubmissionMessage] = useState({ type: '', text: ''});

  const storeWhatsAppNumber = "967782343232"; 

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (cart.items.length === 0) {
        setSubmissionMessage({type: 'error', text: 'ุณูุชู ูุงุฑุบุฉ. ูุฑุฌู ุฅุถุงูุฉ ููุชุฌุงุช ุฃููุงู.'});
        return;
    }
    setIsProcessing(true);
    setSubmissionMessage({type: '', text: ''});

    const orderId = `ORDER-${Date.now()}`;
    let messageBody = `*ุทูุจ ุฌุฏูุฏ ูู ุงููุชุฌุฑ ุงูุฃููู* ๐ฅ\n\n`;
    messageBody += `*ุฑูู ุงูุทูุจ:* ${orderId}\n\n`;
    messageBody += `๐๏ธ *ุงูููุชุฌุงุช ุงููุทููุจุฉ:*\n`;
    cart.items.forEach(item => {
      messageBody += `  - ${item.name} (ุงููููุฉ: ${item.quantity}) - ุงูุณุนุฑ: $${(item.price * item.quantity).toFixed(2)}\n`;
    });
    messageBody += `\n๐ฐ *ุงููุฌููุน ุงูููู ููุทูุจ:* $${cart.totalAmount.toFixed(2)}\n\n`;
    messageBody += `-------------------------------------\n`;
    messageBody += `ุงูุฑุฌุงุก ุชุฃููุฏ ุงุณุชูุงู ุงูุทูุจ ูุชูุนูู ุงูุฎุฏูุฉ. ููููู ุฅุฑุณุงู ุฅูุตุงู ุงูุฏูุน ูู ูุฐู ุงููุญุงุฏุซุฉ.\n\n`;
    messageBody += `ุดูุฑูุง ูุชุนุงููู ูุนูุง! โจ`;

    const encodedMessage = encodeURIComponent(messageBody);
    const whatsappUrl = `https://wa.me/${storeWhatsAppNumber}?text=${encodedMessage}`;

    window.open(whatsappUrl, '_blank');
    
    setIsProcessing(false);
    setSubmissionMessage({type: 'success', text: 'ุชู ุชุฌููุฒ ุทูุจู ููุฅุฑุณุงู ุนุจุฑ ูุงุชุณุงุจ. ูุฑุฌู ูุชุญ ุชุทุจูู ูุงุชุณุงุจ ูุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงููุฌูุฒุฉ ูุฅุชูุงู ุงูุทูุจ. ุณูุชู ูุณุญ ุงูุณูุฉ ุงูุขู.'});
    
    console.log("===== ุชู ุชุฌููุฒ ุฑุณุงูุฉ ูุงุชุณุงุจ ููุทูุจ ุงูุชุงูู =====");
    console.log("ุฑูู ุงูุทูุจ:", orderId);
    console.log("ุงูููุชุฌุงุช:", cart.items.map(item => `${item.name} (x${item.quantity})`).join(', '));
    console.log("ุงูุฅุฌูุงูู:", cart.totalAmount);
    console.log("ุฑุงุจุท ูุงุชุณุงุจ (ูููุณุฎ ุงููุฏูู ุฅุฐุง ูุฒู ุงูุฃูุฑ):", whatsappUrl);
    console.log("==========================================");

    clearCart();
  };


  if (submissionMessage.type === 'success' && cart.items.length === 0) {
    return (
      <div className="container mx-auto py-16 px-4 text-center text-white">
        <MessageSquare size={72} className="mx-auto mb-8 text-green-400"/>
        <h2 className="text-3xl font-semibold mb-4 text-green-300">ุชู ุชุฌููุฒ ุฑุณุงูุฉ ุทูุจู ุนุจุฑ ูุงุชุณุงุจ!</h2>
        <p className="text-slate-300 mb-6 text-lg">{submissionMessage.text}</p>
        <StyledButton onClick={() => setCurrentView('home')} variant="primary" size="large">ุงูุนูุฏุฉ ุฅูู ุงูุฑุฆูุณูุฉ</StyledButton>
      </div>
    );
  }
  
  if (cart.items.length === 0 && submissionMessage.type !== 'success') {
     return (
      <div className="container mx-auto py-16 px-4 text-center text-white"><h2 className="text-2xl font-semibold mb-4">ุณูุชู ูุงุฑุบุฉ.</h2><p className="text-slate-400 mb-8">ูุฑุฌู ุฅุถุงูุฉ ููุชุฌุงุช ุฅูู ุณูุชู ูุจู ุงููุชุงุจุนุฉ ุฅูู ุงูุฏูุน.</p><StyledButton onClick={() => setCurrentView('products')} variant="primary" size="large">ุชุณูู ุงูููุชุฌุงุช</StyledButton></div>
    );
  }

  return (
    <div className="container mx-auto py-10 md:py-16 px-4 text-white">
      <h2 className="text-3xl md:text-4xl font-bold mb-10">ุชุฃููุฏ ุงูุทูุจ ุนุจุฑ ูุงุชุณุงุจ</h2>
      <div className="bg-slate-800 rounded-xl shadow-2xl p-6 md:p-8 max-w-2xl mx-auto">
        <h3 className="text-2xl font-semibold mb-6 text-sky-300">ููุฎุต ุงูุทูุจ</h3>
        {cart.items.map(item => (
          <div key={item.id} className="flex justify-between items-center py-2.5 border-b border-slate-700 last:border-b-0">
            <div><p className="font-medium text-slate-200">{item.name} <span className="text-xs text-slate-400">(x{item.quantity})</span></p></div>
            <p className="text-slate-300 text-left">${(item.price * item.quantity).toFixed(2)}</p>
          </div>
        ))}
        <div className="mt-8 pt-6 border-t border-slate-700">
          <div className="flex justify-between items-center text-xl font-semibold"><p className="text-slate-100">ุงูุฅุฌูุงูู:</p><p className="text-white text-left">${cart.totalAmount.toFixed(2)}</p></div>
        </div>
        {submissionMessage.text && !isProcessing && (
            <div className={`p-4 mt-6 rounded-md text-sm flex items-center gap-3 ${submissionMessage.type === 'error' ? 'bg-red-900/50 text-red-300 border border-red-700' : 'bg-green-900/50 text-green-300 border border-green-700'}`}>
              {submissionMessage.type === 'error' ? <Info size={20}/> : <CheckCircle size={20}/>}
              <span>{submissionMessage.text}</span>
            </div>
        )}
        <form onSubmit={handleSubmit} className="mt-8">
            <p className="text-sm text-slate-400 mb-6">
              ุจุงูุถุบุท ุนูู ุงูุฒุฑ ุฃุฏูุงูุ ุณูุชู ุชุญุถูุฑ ุฑุณุงูุฉ ูุงุชุณุงุจ ุชุญุชูู ุนูู ุชูุงุตูู ุทูุจู. <strong>ูุฌุจ ุนููู ุฅุฑุณุงู ูุฐู ุงูุฑุณุงูุฉ ูุฏูููุง ูู ุชุทุจูู ูุงุชุณุงุจ</strong> ูุฅุชูุงู ุนูููุฉ ุงูุทูุจ. ููููู ุฅุฑูุงู ุฅูุตุงู ุงูุฏูุน ูู ูุญุงุฏุซุฉ ูุงุชุณุงุจ.
            </p>
            <StyledButton type="submit" variant="whatsapp" size="large" className="w-full" disabled={isProcessing} icon={isProcessing ? Loader2 : MessageSquare}>
              {isProcessing ? 'ุฌุงุฑู ุงูุชุฌููุฒ...' : 'ุฅุฑุณุงู ุงูุทูุจ ุนุจุฑ ูุงุชุณุงุจ'}
            </StyledButton>
        </form>
      </div>
    </div>
  );
};

const InfoPageLayout = ({ title, children }) => (
    <div className="container mx-auto py-16 px-4 text-white min-h-[calc(100vh-250px)] flex flex-col items-center">
        <h2 className="text-4xl md:text-5xl font-bold mb-10 text-sky-300 text-center animate-fade-in-down section-title-underline">{title}</h2>
        <div className="bg-slate-800 p-8 md:p-12 rounded-xl shadow-2xl max-w-3xl w-full mx-auto text-lg leading-relaxed animate-fade-in-up delay-200">
            {children}
        </div>
    </div>
);

const AboutUsView = () => (
    <InfoPageLayout title="ูู ูุญู">
        <p className="mb-6 text-slate-200">ุฃููุงู ุจู ูู <strong>ุงููุชุฌุฑ ุงูุฃููู</strong>! ูุญู ูุฑูู ุดุบูู ุจุชูููุฑ ุฃูุถู ุงูููุชุฌุงุช ุงูุฑูููุฉ ุงูุชู ุชูุจู ุงุญุชูุงุฌุงุชู ูุชุทูุนุงุชู. ูุณุนู ุฏุงุฆููุง ูุชูุฏูู ุชุฌุฑุจุฉ ุชุณูู ูุฑูุฏุฉ ูููุชุนุฉุ ูุน ุงูุชุฑููุฒ ุนูู ุงูุฌูุฏุฉ ูุงูุงุจุชูุงุฑ.</p>
        <p className="mb-6 text-slate-200">ูููุชูุง ูู ุชูููู ุงููุจุฏุนูู ูุงููููููู ูู ุฎูุงู ุชูููุฑ ุฃุฏูุงุช ูููุงุฑุฏ ุฑูููุฉ ุนุงููุฉ ุงููุณุชูู ุชุณุงุนุฏูู ุนูู ุชุญููู ุฃูุฏุงููู. ุณูุงุก ููุช ุชุจุญุซ ุนู ุฏูุฑุงุช ุชุฏุฑูุจูุฉุ ููุงูุจ ุชุตูููุ ุจุฑุงูุฌ ุฅูุชุงุฌูุฉุ ุฃู ุฃุตูู ุฅุจุฏุงุนูุฉุ ุณุชุฌุฏ ูุฏููุง ูุง ููุงุณุจู.</p>
        <p className="text-slate-200">ูุคูู ุจุฃูููุฉ ุจูุงุก ุนูุงูุฉ ูููุฉ ูุน ุนููุงุฆูุงุ ููุณุนู ูุชูุฏูู ุฏุนู ูุชููุฒ ูุฎุฏูุฉ ุนููุงุก ุณุฑูุนุฉ ุงูุงุณุชุฌุงุจุฉ. ุดูุฑูุง ูุซูุชู ุจูุง!</p>
    </InfoPageLayout>
);

const ContactUsView = () => (
    <InfoPageLayout title="ุงุชุตู ุจูุง">
        <p className="mb-8 text-slate-200">ูุณุนุฏูุง ุชูุงุตูู ูุนูุง! ุฅุฐุง ูุงู ูุฏูู ุฃู ุงุณุชูุณุงุฑุงุชุ ุงูุชุฑุงุญุงุชุ ุฃู ุชุญุชุงุฌ ุฅูู ูุณุงุนุฏุฉุ ููุง ุชุชุฑุฏุฏ ูู ุงูุงุชุตุงู ุจูุง ุนุจุฑ ุฅุญุฏู ุงูุทุฑู ุงูุชุงููุฉ:</p>
        <ul className="space-y-6 mb-8">
            <li className="flex items-start">
                <Mail size={28} className="me-4 text-sky-400 mt-1 flex-shrink-0" />
                <div>
                    <h3 className="font-semibold text-xl text-sky-300 mb-1">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</h3>
                    <a href="mailto:sabersaeedsaif@gmail.com" className="text-slate-200 hover:text-sky-400 transition-colors">sabersaeedsaif@gmail.com</a>
                </div>
            </li>
            <li className="flex items-start">
                <MessageSquare size={28} className="me-4 text-sky-400 mt-1 flex-shrink-0" />
                <div>
                    <h3 className="font-semibold text-xl text-sky-300 mb-1">ูุงุชุณุงุจ (ููุงุณุชูุณุงุฑุงุช ูุงูุทูุจุงุช)</h3>
                    <a href="https://wa.me/967782343232" target="_blank" rel="noopener noreferrer" className="text-slate-200 hover:text-sky-400 transition-colors dir-ltr inline-block">+967 782 343 232</a>
                </div>
            </li>
        </ul>
        <p className="text-slate-300">ูุญู ูุชูุงุฌุฏูู ููุณุงุนุฏุชู ููุชุทูุน ูุณูุงุน ุขุฑุงุฆู!</p>
    </InfoPageLayout>
);

const PrivacyPolicyView = () => (
    <InfoPageLayout title="ุณูุงุณุฉ ุงูุฎุตูุตูุฉ">
        <p className="mb-4">ุชุงุฑูุฎ ุงูุณุฑูุงู: 22 ูุงูู 2025</p>
        <p className="mb-6">ูุญู ูู "ุงููุชุฌุฑ ุงูุฃููู" ููุฏุฑ ุฎุตูุตูุชู ููุณุนู ูุญูุงูุฉ ูุนูููุงุชู ุงูุดุฎุตูุฉ. ุชูุถุญ ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ูุฐู ููู ูุฌูุน ููุณุชุฎุฏู ูููุดู ุนู ูุนูููุงุชู ุนูุฏ ุงุณุชุฎุฏุงูู ููุชุฌุฑูุง.</p>
        
        <h3 className="text-2xl font-semibold text-sky-400 mt-6 mb-3">1. ุงููุนูููุงุช ุงูุชู ูุฌูุนูุง</h3>
        <p className="mb-4">ูุฏ ูุฌูุน ูุนูููุงุช ุดุฎุตูุฉ ุชูุฏููุง ููุง ูุจุงุดุฑุฉุ ูุซู ุงุณูู ูุจุฑูุฏู ุงูุฅููุชุฑููู ูุฑูู ูุงุชูู ุนูุฏ ุฅุชูุงู ุนูููุฉ ุดุฑุงุก (ุนุจุฑ ูุงุชุณุงุจ).</p>
        <p className="mb-4">ูุณุชุฎุฏู Firebase Authentication ูุชุณุฌูู ุงูุฏุฎูู ุงููุฌููู ูุญูุธ ุจูุงูุงุช ุณูุฉ ุงูุชุณูู ุงูุฎุงุตุฉ ุจู ุจุดูู ุขูู ููุฑุชุจุท ุจุญุณุงุจู ุงููุฌููู.</p>

        <h3 className="text-2xl font-semibold text-sky-400 mt-6 mb-3">2. ููู ูุณุชุฎุฏู ูุนูููุงุชู</h3>
        <p className="mb-4">ูุณุชุฎุฏู ุงููุนูููุงุช ุงูุชู ูุฌูุนูุง ูู:</p>
        <ul className="list-disc list-inside space-y-2 mb-4 ps-4">
            <li>ุชุณููู ุนูููุฉ ุงูุดุฑุงุก ููุนุงูุฌุฉ ุทูุจุงุชู (ุนุจุฑ ุงูุชูุงุตู ุงููุจุงุดุฑ ูุนู).</li>
            <li>ุชุญุณูู ูุชุฎุตูุต ุชุฌุฑุจุชู ูู ุงููุชุฌุฑ.</li>
            <li>ุงูุชูุงุตู ูุนู ุจุฎุตูุต ุทูุจุงุชู ุฃู ุงุณุชูุณุงุฑุงุชู.</li>
        </ul>

        <h3 className="text-2xl font-semibold text-sky-400 mt-6 mb-3">3. ูุดุงุฑูุฉ ูุนูููุงุชู</h3>
        <p className="mb-4">ูุญู ูุง ูุจูุน ุฃู ูุคุฌุฑ ูุนูููุงุชู ุงูุดุฎุตูุฉ ูุฃุทุฑุงู ุซุงูุซุฉ. ูุฏ ูุดุงุฑู ูุนูููุงุชู ููุท ูู ุงูุญุงูุงุช ุงูุชุงููุฉ:</p>
        <ul className="list-disc list-inside space-y-2 mb-4 ps-4">
            <li>ุจููุงููุชู.</li>
            <li>ููุงูุชุซุงู ููููุงููู ูุงูููุงุฆุญ ุงููุนููู ุจูุง.</li>
        </ul>
        <p className="mb-4">ูุชู ุงูุชุนุงูู ูุน ุชูุงุตูู ุงูุทูุจ ุงูุชู ุชุฑุณููุง ุนุจุฑ ูุงุชุณุงุจ ูุจุงุดุฑุฉ ุจููู ูุจูู ุฅุฏุงุฑุฉ ุงููุชุฌุฑ.</p>

        <h3 className="text-2xl font-semibold text-sky-400 mt-6 mb-3">4. ุฃูุงู ูุนูููุงุชู</h3>
        <p className="mb-4">ูุชุฎุฐ ุชุฏุงุจูุฑ ูุนูููุฉ ูุญูุงูุฉ ูุนูููุงุชู ุงูุดุฎุตูุฉ ูู ุงููุตูู ุฃู ุงูุงุณุชุฎุฏุงู ุฃู ุงููุดู ุบูุฑ ุงููุตุฑุญ ุจู. ููุน ุฐููุ ูุง ุชูุฌุฏ ุทุฑููุฉ ููู ุนุจุฑ ุงูุฅูุชุฑูุช ุฃู ุชุฎุฒูู ุฅููุชุฑููู ุขููุฉ ุจูุณุจุฉ 100%.</p>

        <h3 className="text-2xl font-semibold text-sky-400 mt-6 mb-3">5. ุงูุชุบููุฑุงุช ุนูู ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</h3>
        <p className="mb-4">ูุฏ ูููู ุจุชุญุฏูุซ ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ูุฐู ูู ููุช ูุขุฎุฑ. ุณูููู ุจุฅุฎุทุงุฑู ุจุฃู ุชุบููุฑุงุช ุนู ุทุฑูู ูุดุฑ ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ุงูุฌุฏูุฏุฉ ุนูู ูุฐู ุงูุตูุญุฉ.</p>

        <h3 className="text-2xl font-semibold text-sky-400 mt-6 mb-3">6. ุงุชุตู ุจูุง</h3>
        <p className="mb-4">ุฅุฐุง ูุงู ูุฏูู ุฃู ุฃุณุฆูุฉ ุญูู ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ูุฐูุ ูุฑุฌู ุงูุงุชุตุงู ุจูุง ุนุจุฑ ุงููุนูููุงุช ุงููุชููุฑุฉ ูู ุตูุญุฉ "ุงุชุตู ุจูุง".</p>
    </InfoPageLayout>
);

const FAQItem = ({ question, answer }) => {
    const [isOpen, setIsOpen] = useState(false);
    return (
        <div className="border-b border-slate-700 py-4">
            <button
                onClick={() => setIsOpen(!isOpen)}
                className="flex justify-between items-center w-full text-right text-lg font-semibold text-sky-300 hover:text-sky-200 transition-colors"
            >
                <span>{question}</span>
                {isOpen ? <ChevronUp size={24} /> : <ChevronDown size={24} />}
            </button>
            {isOpen && (
                <div className="mt-3 text-slate-300 leading-relaxed animate-fade-in-up text-base">
                    <p>{answer}</p>
                </div>
            )}
        </div>
    );
};

const FAQView = () => {
    const faqs = [
        {
            question: "ููู ูููููู ุดุฑุงุก ููุชุฌ ูู ุงููุชุฌุฑุ",
            answer: "ุชุตูุญ ุงูููุชุฌุงุชุ ุฃุถู ุงูููุชุฌ ุงูุฐู ุชุฑูุฏู ุฅูู ุณูุฉ ุงูุชุณููุ ุซู ุงูุชูู ุฅูู ุงูุณูุฉ ูุงุถุบุท ุนูู 'ุงููุชุงุจุนุฉ ุฅูู ุงูุฏูุน'. ุณูุชู ุชูุฌููู ูุฅุฑุณุงู ุชูุงุตูู ุทูุจู ุนุจุฑ ูุงุชุณุงุจ ูุฅุชูุงู ุนูููุฉ ุงูุดุฑุงุก."
        },
        {
            question: "ูุง ูู ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉุ",
            answer: "ุญุงูููุงุ ูุชู ุชุฃููุฏ ุงูุทูุจุงุช ุนุจุฑ ูุงุชุณุงุจ. ููููู ููุงูุดุฉ ุชูุงุตูู ุงูุฏูุน ูุฅุฑุณุงู ุงูุฅูุตุงู ูุจุงุดุฑุฉ ุนุจุฑ ูุญุงุฏุซุฉ ูุงุชุณุงุจ ูุน ุฅุฏุงุฑุฉ ุงููุชุฌุฑ."
        },
        {
            question: "ูู ุงูููุชุฌุงุช ุฑูููุฉ ุฃู ูุงุฏูุฉุ",
            answer: "ุฌููุน ุงูููุชุฌุงุช ุงููุนุฑูุถุฉ ูู ุงููุชุฌุฑ ูู ููุชุฌุงุช ุฑูููุฉ (ูุซู ุงูุฏูุฑุงุช ุงูุชุฏุฑูุจูุฉุ ุงููุชุจ ุงูุฅููุชุฑูููุฉุ ููุงูุจ ุงูุชุตูููุ ุงูุจุฑุงูุฌุ ุฅูุฎ). ุณูุชู ุชุณููููุง ูู ุฅููุชุฑููููุง ุจุนุฏ ุชุฃููุฏ ุงูุฏูุน."
        },
        {
            question: "ููู ุฃุญุตู ุนูู ุงูููุชุฌ ุจุนุฏ ุงูุดุฑุงุกุ",
            answer: "ุจุนุฏ ุชุฃููุฏ ุทูุจู ูุฏูุนู ุนุจุฑ ูุงุชุณุงุจุ ุณูุชู ุฅุฑุณุงู ุงูููุชุฌ ุงูุฑููู ุฅููู ุจุงูุทุฑููุฉ ุงููุชูู ุนูููุง (ุนุงุฏุฉู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ุฑุงุจุท ุชุญููู ูุจุงุดุฑ)."
        },
        {
            question: "ูู ูููููู ุงุณุชุฑุฌุงุน ุงูููุชุฌ ุฃู ุงุณุชุฑุฏุงุฏ ุงููุจูุบุ",
            answer: "ูุธุฑูุง ูุทุจูุนุฉ ุงูููุชุฌุงุช ุงูุฑูููุฉุ ูุฏ ุชุฎุชูู ุณูุงุณุฉ ุงูุงุณุชุฑุฌุงุน ูุงูุงุณุชุฑุฏุงุฏ. ูุฑุฌู ุงูุชูุงุตู ูุนูุง ูููุงูุดุฉ ุญุงูุชู ุจุดูู ุฎุงุต ูุจู ุฃู ุจุนุฏ ุงูุดุฑุงุก."
        }
    ];

    return (
        <InfoPageLayout title="ุงูุฃุณุฆูุฉ ุงููุชูุฑุฑุฉ">
            <div className="space-y-4">
                {faqs.map((faq, index) => (
                    <FAQItem key={index} question={faq.question} answer={faq.answer} />
                ))}
            </div>
        </InfoPageLayout>
    );
};


const Footer = () => (
  <footer className="bg-slate-850 text-slate-400 py-16 mt-auto border-t border-slate-700">
    <div className="container mx-auto px-4">
      <div className="grid grid-cols-1 md:grid-cols-3 gap-10 mb-10">
        <div><h3 className="text-xl font-semibold text-sky-400 mb-4 flex items-center"><Zap size={24} className="me-2 text-yellow-400"/>ุงููุชุฌุฑ ุงูุฃููู</h3><p className="text-sm leading-relaxed">ูุฌูุชู ุงูุฃููู ููููุชุฌุงุช ุงูุฑูููุฉ ุงููุจุชูุฑุฉ. ููุฏู ูู ุงูุฌูุฏุฉ ูุงูุฅุจุฏุงุน ูู ููุงู ูุงุญุฏ.</p></div>
        <div><h3 className="text-lg font-semibold text-white mb-4">ุฑูุงุจุท ูููุฉ</h3><ul className="space-y-2.5 text-sm">
            <li><a href="#about" onClick={(e) => { e.preventDefault(); document.dispatchEvent(new CustomEvent('navigateTo', {detail: 'about'})); }} className="hover:text-sky-400 transition-colors">ูู ูุญู</a></li>
            <li><a href="#contact" onClick={(e) => { e.preventDefault(); document.dispatchEvent(new CustomEvent('navigateTo', {detail: 'contact'})); }} className="hover:text-sky-400 transition-colors">ุงุชุตู ุจูุง</a></li>
            <li><a href="#privacy" onClick={(e) => { e.preventDefault(); document.dispatchEvent(new CustomEvent('navigateTo', {detail: 'privacy'})); }} className="hover:text-sky-400 transition-colors">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a></li>
            <li><a href="#faq" onClick={(e) => { e.preventDefault(); document.dispatchEvent(new CustomEvent('navigateTo', {detail: 'faq'})); }} className="hover:text-sky-400 transition-colors">ุงูุฃุณุฆูุฉ ุงููุชูุฑุฑุฉ</a></li>
            </ul>
        </div>
        <div><h3 className="text-lg font-semibold text-white mb-4">ุชูุงุตู ูุนูุง</h3>
            <ul className="space-y-2.5 text-sm">
                <li><a href="mailto:sabersaeedsaif@gmail.com" className="hover:text-sky-400 transition-colors flex items-center"><Mail size={16} className="me-2"/> sabersaeedsaif@gmail.com</a></li>
                <li><a href="https://wa.me/967782343232" target="_blank" rel="noopener noreferrer" className="hover:text-sky-400 transition-colors flex items-center"><MessageSquare size={16} className="me-2"/> +967 782 343 232</a></li>
            </ul>
        </div>
      </div>
      <div className="text-center text-sm border-t border-slate-700 pt-10"><p>&copy; {new Date().getFullYear()} ุงููุชุฌุฑ ุงูุฃููู. ุฌููุน ุงูุญููู ูุญููุธุฉ. <span className="block sm:inline mt-1 sm:mt-0">ุชุตููู ูุชุทููุฑ ูุฃุบุฑุงุถ ุงูุนุฑุถ.</span></p>{typeof __app_id !== 'undefined' && <p className="text-xs mt-2 opacity-70">ูุนุฑู ุงูุชุทุจูู: {appId}</p>}</div>
    </div>
  </footer>
);

function App() {
  const [currentView, setCurrentView] = useState('home');
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [allProducts, setAllProducts] = useState([]);
  const [filteredProducts, setFilteredProducts] = useState([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [isLoadingProducts, setIsLoadingProducts] = useState(true);
  const [error, setError] = useState(null);
  const { isCartLoading } = useCart(); 

  const fetchProducts = useCallback(async () => {
    setIsLoadingProducts(true);
    setError(null);
    try {
      await seedProducts(); 
      const productsCollectionRef = collection(db, `/artifacts/${appId}/public/data/products_ar`);
      const productSnapshot = await getDocs(query(productsCollectionRef));
      const productsList = productSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      setAllProducts(productsList);
      setFilteredProducts(productsList);
    } catch (err) {
      console.error("ุฎุทุฃ ูู ุฌูุจ ุงูููุชุฌุงุช:", err);
      if (err.code === 'permission-denied') {
        setError("ูุดู ุชุญููู ุงูููุชุฌุงุช: ูุง ุชูุฌุฏ ุตูุงุญูุฉ ูููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. ูุฑุฌู ูุฑุงุฌุนุฉ ููุงุนุฏ ุงูุฃูุงู ูู Firestore.");
        console.error("ุชูููุญ ูุงู: ูุฅุตูุงุญ ุฎุทุฃ 'permission-denied'ุ ุงูุชูู ุฅูู ููุญุฉ ุชุญูู Firebase > Firestore Database > Rules (ุงูููุงุนุฏ) ูุนุฏูู ุงููุงุนุฏุฉ ุงูุฎุงุตุฉ ุจูุฌููุนุฉ 'products_ar' ูุชุณูุญ ุจุงููุฑุงุกุฉ ุงูุนุงูุฉุ ูุซุงู: match /artifacts/{appId}/public/data/products_ar/{productId} { allow read: if true; allow write: if request.auth != null; } ุซู ุงุถุบุท Publish.");
      } else {
        setError("ูุดู ุชุญููู ุงูููุชุฌุงุช. ูุฑุฌู ูุญุงููุฉ ุชุญุฏูุซ ุงูุตูุญุฉ.");
      }
      setAllProducts(initialProductsData); 
      setFilteredProducts(initialProductsData);
    } finally {
      setIsLoadingProducts(false);
    }
  }, [appId]);

  useEffect(() => {
    const handleNavigate = (event) => {
        setCurrentView(event.detail);
        window.scrollTo(0, 0); 
    };
    document.addEventListener('navigateTo', handleNavigate);
    return () => {
        document.removeEventListener('navigateTo', handleNavigate);
    };
  }, []);

  useEffect(() => {
    const signIn = async () => {
      try {
        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) { await signInWithCustomToken(auth, __initial_auth_token); } 
        else { await signInAnonymously(auth); }
        console.log("ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ.");
      } catch (error) { console.error("ุฎุทุฃ ูู ูุตุงุฏูุฉ Firebase:", error); setError("ูุดูุช ุงููุตุงุฏูุฉ."); }
    };
    signIn();
    fetchProducts();
  }, [fetchProducts]);

  useEffect(() => {
    if (searchQuery === '') { setFilteredProducts(allProducts); } 
    else {
      setFilteredProducts(
        allProducts.filter(product =>
          product.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||
          product.description?.toLowerCase().includes(searchQuery.toLowerCase()) ||
          product.category?.toLowerCase().includes(searchQuery.toLowerCase()) ||
          (product.tags && product.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase())))
        )
      );
    }
  }, [searchQuery, allProducts]);

  const renderView = () => {
    if (isLoadingProducts || isCartLoading) {
      return <div className="flex flex-col items-center justify-center min-h-[calc(100vh-200px)] text-white text-center py-20 text-xl"><Loader2 size={48} className="animate-spin mb-4 text-sky-400"/>ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงููุชุฌุฑ...</div>;
    }
    if (error && !allProducts.length) { 
      return <div className="text-red-400 text-center py-20 text-xl bg-red-900/30 p-4 rounded-md max-w-2xl mx-auto my-10">{error}</div>;
    }

    switch (currentView) {
      case 'home': return (<><PromotionalBanner products={allProducts} setCurrentView={setCurrentView} setSelectedProduct={setSelectedProduct} /><Hero setCurrentView={setCurrentView} /><ProductList products={filteredProducts.slice(0, 4)} setCurrentView={setCurrentView} setSelectedProduct={setSelectedProduct} title="ุฃุญุฏุซ ุงูุฅุถุงูุงุช ุงูุฅุจุฏุงุนูุฉ"/></>);
      case 'products': return <><PromotionalBanner products={allProducts} setCurrentView={setCurrentView} setSelectedProduct={setSelectedProduct} /><ProductList products={filteredProducts} setCurrentView={setCurrentView} setSelectedProduct={setSelectedProduct} title="ุฌููุน ูููุฒูุง ุงูุฑูููุฉ" /></>;
      case 'productDetail': return <ProductDetailView product={selectedProduct} setCurrentView={setCurrentView} />;
      case 'cart': return <CartView setCurrentView={setCurrentView} />;
      case 'checkout': return <CheckoutView setCurrentView={setCurrentView} />;
      case 'about': return <AboutUsView />;
      case 'contact': return <ContactUsView />;
      case 'privacy': return <PrivacyPolicyView />;
      case 'faq': return <FAQView />;
      default: return <h2 className="text-white text-center py-20 text-2xl">ุงูุตูุญุฉ ุงููุทููุจุฉ ุบูุฑ ููุฌูุฏุฉ.</h2>;
    }
  };

  return (
    <div className="bg-slate-900 min-h-screen flex flex-col font-['Tajawal',_sans-serif] text-slate-100" dir="rtl">
      <Navbar setCurrentView={setCurrentView} setSearchQuery={setSearchQuery} />
      <main className="flex-grow transition-opacity duration-500 ease-in-out">
        {renderView()}
      </main>
      <Footer />
    </div>
  );
}

export default function Root() {
  return ( <CartProvider> <App /> </CartProvider> );
}

const styleSheet = document.createElement("style");
styleSheet.type = "text/css";
styleSheet.innerText = `
  @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap');
  html { scroll-behavior: smooth; }
  body { font-family: 'Tajawal', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
  @keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-25px); } 100% { opacity: 1; transform: translateY(0); } }
  .animate-fade-in-down { animation: fade-in-down 0.6s ease-out forwards; }
  @keyframes fade-in-up { 0% { opacity: 0; transform: translateY(25px); } 100% { opacity: 1; transform: translateY(0); } }
  .animate-fade-in-up { animation: fade-in-up 0.6s ease-out forwards; }
  .delay-200 { animation-delay: 0.2s; } .delay-400 { animation-delay: 0.4s; }
  @keyframes bounce-slow { 0%, 100% { transform: translateY(-4%); animation-timing-function: cubic-bezier(0.8,0,1,1); } 50% { transform: none; animation-timing-function: cubic-bezier(0,0,0.2,1); } }
  .animate-bounce-slow { animation: bounce-slow 2.5s infinite; }
  .bg-slate-850 { background-color: #161e2c; } 
  .pattern-dots { background-image: radial-gradient(currentColor 1px, transparent 1px); background-size: calc(10 * 1px) calc(10 * 1px); }
  .marquee-container { width: 100%; overflow: hidden; }
  .marquee-content { display: flex; width: max-content; }
  @keyframes marquee { 0% { transform: translateX(0%); } 100% { transform: translateX(-50%); } }
  .animate-marquee { animation: marquee 40s linear infinite; }
  .marquee-content:hover { animation-play-state: paused; }
  .hero-text-shadow { text-shadow: 0px 2px 4px rgba(0,0,0,0.3); }
  .product-card-hover-effect { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
  .button-hover-lift:hover { transform: translateY(-2px); }
  .section-title-underline {
    position: relative;
    padding-bottom: 0.75rem; 
  }
  .section-title-underline::after {
    content: '';
    position: absolute;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%);
    width: 80px; 
    height: 4px; 
    background-color: theme('colors.sky.500'); 
    border-radius: 3px;
  }
  input[type="text"]::placeholder {
    color: theme('colors.slate.500');
  }
  .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
  .animate-pulse-slower { animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
`;
document.head.appendChild(styleSheet);
const fontLink = document.createElement('link');
fontLink.href = 'https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap';
fontLink.rel = 'stylesheet';

